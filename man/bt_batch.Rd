% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/main_functions.R
\name{bt_batch}
\alias{bt_batch}
\title{Run multiple backtests in batch}
\usage{
bt_batch(
  type = c("eldoc", "ema", "sma"),
  tickers,
  timeframes = "1D",
  mup = 40,
  mdown = 40,
  mps_risk_value = 2,
  mps = "pct",
  fee = "normal",
  start_date = "1900-01-01",
  end_date = Sys.Date(),
  long = TRUE,
  short = TRUE,
  invert_signals = FALSE,
  normalize_risk = NULL,
  geometric = FALSE,
  verbose = FALSE,
  only_returns = FALSE,
  hide_details = FALSE,
  returns_type = "Log",
  plot_mult = FALSE,
  gen_portfolio = NULL,
  gen_portfolio_weights = NULL,
  gen_portfolio_norm_risk = NULL,
  ...
)
}
\arguments{
\item{type}{Character scalar selecting the indicator module. One of
\code{"eldoc"} (Donchian), \code{"ema"}, or \code{"sma"}.}

\item{tickers}{Character vector of base symbols to backtest, or a (named)
list where each element describes overrides for a specific ticker (e.g.
\code{list(ES = list(timeframes = c("30M", "1H"), mup = c(30, 40)))}). When
omitted you may pass the specification list as the first argument (e.g.
\verb{bt_batch(list(MySpec = list(ticker = "ES", type = "eldoc", timeframes = "1H"))))}),
allowing each specification to provide its own \code{ticker}, \code{type}, and
parameter grid.}

\item{timeframes}{Character vector of timeframe suffixes appended to each
ticker (e.g. \code{"4H"}).}

\item{mup, mdown}{Numeric vectors used as Donchian window lengths and also as
fallbacks for moving-average speeds.}

\item{mps_risk_value}{Numeric risk percentage passed to the position-sizing
function.}

\item{mps}{Character string specifying the position-sizing method.}

\item{fee}{Fee handling mode per test (\code{"normal"} or \code{"nofee"}).}

\item{start_date, end_date}{Optional boundaries for fetched data.}

\item{long, short}{Logical flags enabling long and/or short trades.}

\item{invert_signals}{Logical flag to invert generated signals.}

\item{normalize_risk}{Optional numeric target risk for return normalisation.}

\item{geometric}{Logical indicating geometric aggregation for reports.}

\item{verbose}{Logical or logical vector for emitting progress messages.}

\item{only_returns}{Logical; if \code{TRUE}, returns an \code{xts} matrix of returns
instead of the full backtest objects.}

\item{hide_details}{Logical flag propagated to the underlying backtest.}

\item{returns_type}{Desired returns column (\code{"Log"}, \code{"Discrete"},
\code{"LogAdj"}, or \code{"DiscreteAdj"}).}

\item{plot_mult}{Logical flag; if \code{TRUE}, plots combined results via \code{tplot()}.}

\item{gen_portfolio}{Optional vector or list describing which backtest
outputs to aggregate into synthetic portfolios. Each element (or the entire
vector when not a list) is treated as one group of indices based on the
execution order, producing an additional \verb{Portfolio_*} series. Elements may
be numeric vectors, character identifiers, or lists containing \code{indices}
and/or \code{labels} entries.}

\item{gen_portfolio_weights}{Optional weights applied to each group defined
by \code{gen_portfolio}. Accepts a vector (recycled) or list mirroring the group
structure. When omitted or containing only zeros/\code{NA}, equal weights are
assumed for the corresponding group.}

\item{gen_portfolio_norm_risk}{Optional numeric vector mirroring the groups
in \code{gen_portfolio}, specifying the target annualised volatility for each
generated portfolio. When omitted, portfolio aggregates keep the natural
volatility of their components.}

\item{...}{Indicator-specific parameter vectors (e.g., \code{fast}, \code{slow} for
moving averages).}
}
\value{
When \code{only_returns = TRUE}, an \code{xts} object with merged returns
columns; otherwise a named list of backtest results keyed by generated
labels.
}
\description{
Vectorises the single-ticker backtest wrappers (\code{bt_eldoc()}, \code{bt_ema()},
\code{bt_sma()}) across symbols, timeframes, and parameter grids. Indicator-specific
parameters can be supplied through \code{mup}/\code{mdown} for Donchian runs or via
\code{...} when using other modules.
}
