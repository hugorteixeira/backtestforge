% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/position_sizing.R
\name{.psEquityPercentageDonchian}
\alias{.psEquityPercentageDonchian}
\title{Donchian risk-based order-sizing function}
\usage{
.psEquityPercentageDonchian(
  data,
  timestamp,
  orderqty,
  ordertype,
  orderside,
  portfolio,
  symbol,
  tradeSize,
  maxSize,
  integerQty = TRUE,
  prefer = "Close",
  risk,
  reinvest = FALSE,
  start_capital = 1e+06,
  maxQty = NA,
  maxQtyBySymbol = NULL,
  minRiskPct = 5e-04,
  ...
)
}
\arguments{
\item{data}{Market data \code{xts} containing columns \code{X.el} (upper) and \code{Y.el} (lower).}

\item{timestamp}{Signal timestamp.}

\item{orderqty}{Ignored; required by signature.}

\item{ordertype}{Order type string; required by signature.}

\item{orderside}{One of \code{"long"} or \code{"short"}.}

\item{portfolio}{Portfolio name.}

\item{symbol}{Instrument symbol.}

\item{tradeSize}{Max trade size; required by signature.}

\item{maxSize}{Max position size.}

\item{integerQty}{Logical; if \code{TRUE}, quantities are floored to integers.}

\item{prefer}{Column name preferred for price lookup; defaults to \code{"Close"}.}

\item{risk}{Numeric, percent of equity (or capital) to risk per trade.}

\item{reinvest}{Logical; if \code{TRUE}, uses current equity from blotter; otherwise
uses \code{start_capital}.}

\item{start_capital}{Numeric starting capital when \code{reinvest = FALSE}.}

\item{maxQty}{Optional absolute cap on quantity.}

\item{maxQtyBySymbol}{Optional named vector with per-symbol quantity caps.}

\item{minRiskPct}{Minimum risk as a fraction of price if tick size is unknown.}

\item{...}{Additional arguments passed by quantstrat.}
}
\value{
Numeric order quantity (positive for long, negative for short) or 0.
}
\description{
Quantstrat \code{osFUN} that sizes positions based on a user-specified risk
percentage and Donchian channel stops. The per-contract risk is computed as
the distance between entry price and the opposite channel, adjusted by the
instrument multiplier and a minimum risk threshold.
}
\keyword{internal}
